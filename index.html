<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TEST KOSA KATA</title>

<style>
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:'Segoe UI',system-ui,Arial,sans-serif;
  background:url('https://raw.githubusercontent.com/airnetcso/eps/main/image/bg1.jpg') no-repeat center center fixed;
  background-size:cover;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
body::before{
  content:'';
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.container{
  position:relative;
  z-index:1;
  width:420px;
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(12px);
  padding:35px;
  border-radius:22px;
}
input,button{
  width:100%;
  height:52px;
  border-radius:14px;
  font-size:16px;
}
input{
  margin-bottom:14px;
  padding:0 16px;
  border:2px solid rgba(255,255,255,.4);
  background:rgba(255,255,255,.12);
  color:#fff;
}
button{
  border:none;
  font-weight:bold;
  color:#fff;
  background:linear-gradient(90deg,#10b981,#059669);
}
.hidden{display:none}
#error{color:#fecaca;text-align:center;margin-bottom:10px}
#timer{text-align:center;font-size:26px;margin:15px 0}
.progress{height:10px;background:rgba(255,255,255,.2);border-radius:5px;overflow:hidden}
.bar{height:100%;width:0;background:#10b981}
.question strong{font-size:40px;display:block;text-align:center;margin:25px 0}
</style>
</head>

<body>

<div class="container" id="loginBox">
  <h2 align="center">LOGIN TEST</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <input id="kode" placeholder="Kode Test">
  <div id="error"></div>
  <button onclick="login()">MASUK</button>
</div>

<div class="container hidden" id="quizBox">
  <h2 align="center">TEST KOSA KATA</h2>
  <div id="timer">50:00</div>
  <div class="progress"><div class="bar" id="bar"></div></div>
  <div class="question"><strong id="word"></strong></div>
  <input id="answer" placeholder="Jawaban">
  <button onclick="submit()">SUBMIT</button>
</div>

<script>
const users=[
 {username:"user1",password:"12345"},
 {username:"hanarizka",password:"Nungkihana24!"},
 {username:"user3",password:"12345"},
 {username:"siswa01",password:"12345"},
 {username:"windi",password:"Windi2000"},
 {username:"rismaya97",password:"bahasakorea"},
 {username:"admin",password:"admin123",role:"admin"},
 {username:"sita77",password:"minyooki"},
 {username:"Aini185",password:"Doraemon"},
 {username:"Hangeulfei",password:"studykorea02"},
 {username:"Hamdan106",password:"Fukuo106"}
];

const kodeSoal={
 H29976:"./soal1.json",
 R43213:"./soal2.json",
 Z21985:"./soal3.json"
};

let soal=[],i=0,score=0,time=3000,timer;

function login(){
 const u=user.value.trim();
 const p=pass.value.trim();
 const k=kode.value.trim().toUpperCase();
 error.textContent="";

 const akun=users.find(x=>x.username===u&&x.password===p);
 if(!akun){error.textContent="Login salah";return;}

 if(akun.role==="admin"){location.href="admin.html";return;}
 if(!kodeSoal[k]){error.textContent="Kode test salah";return;}

 fetch(kodeSoal[k]+"?v="+Date.now())
  .then(r=>{
    if(!r.ok) throw "Soal tidak ditemukan";
    return r.json();
  })
  .then(d=>{
    if(!Array.isArray(d)) throw "Format JSON salah";
    soal=d;
    loginBox.classList.add("hidden");
    quizBox.classList.remove("hidden");
    start();
  })
  .catch(e=>error.textContent=e);
}

function start(){
 i=0;score=0;time=3000;
 timer=setInterval(()=>{
  time--;
  timerDiv();
  if(time<=0)finish();
 },1000);
 next();
}

function timerDiv(){
 const m=String(Math.floor(time/60)).padStart(2,"0");
 const s=String(time%60).padStart(2,"0");
 timer.textContent=`${m}:${s}`;
}

function next(){
 if(i>=soal.length){finish();return;}
 word.textContent=soal[i].korea;
 answer.value="";
}

function submit(){
 if(answer.value.trim().toLowerCase()===soal[i].indo.toLowerCase())score++;
 i++;
 bar.style.width=(i/soal.length*100)+"%";
 next();
}

function finish(){
 clearInterval(timer);
 alert(`Skor kamu: ${score}/${soal.length}`);
 location.reload();
}
</script>

</body>
</html>
