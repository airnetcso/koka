<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TEST KOSA KATA</title>
<style>
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0}
body{
  font-family:'Segoe UI',system-ui,Arial,sans-serif;
  background:url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?ixlib=rb-4.0.3&auto=format&fit=crop&q=80') no-repeat center center fixed;
  background-size:cover;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  position:relative;
  min-height:100vh;
}
body::before{
  content:'';
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
  z-index:1;
}
.container {
  position: relative; 
  z-index: 2; 
  width: 80%; 
  max-width: 440px; 
  max-height: 90vh; 
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; 
  background: rgba(255,255,255,0.15); 
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px); 
  border-radius: 24px; 
  padding: 40px 30px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.35); 
  border: 1px solid rgba(255,255,255,0.18);
}
input,button{
  width:100%;
  height:52px;
  border-radius:14px;
  font-size:16px;
}
input{
  margin-bottom:14px;
  padding:0 16px;
  border:2px solid rgba(255,255,255,.4);
  background:rgba(255,255,255,.12);
  color:#fff;
}
input::placeholder {
  color: #000000 !important;
  opacity: 1;
}
input::-webkit-input-placeholder { color: #000000 !important; }
input:-moz-placeholder { color: #000000 !important; }
input::-moz-placeholder { color: #000000 !important; }
input:-ms-input-placeholder { color: #000000 !important; }

button{
  border:none;
  font-weight:bold;
  color:#fff;
  background:linear-gradient(90deg,#10b981,#059669);
  cursor:pointer;
}
.hidden{display:none}
#error{color:#fecaca;text-align:center;margin-bottom:10px}
#timer{text-align:center;font-size:26px;margin:15px 0}
.progress{height:10px;background:rgba(255,255,255,.2);border-radius:5px;overflow:hidden;margin:20px 0}
.bar{height:100%;width:0;background:#10b981;transition:width .3s}
.question strong{font-size:40px;display:block;text-align:center;margin:25px 0}

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  text-align: center;
  padding: 15px 0;
  font-size: 14px;
  color: #cccccc;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(5px);
  z-index: 3;
}
</style>
</head>
<body>

<div class="container" id="loginBox">
  <h2 align="center">LOGIN TEST</h2>
  <input id="user" placeholder="Username / 이름">
  <input id="pass" type="password" placeholder="Password / 비밀번호">
  <input id="kode" placeholder="Kode Test / 시험코드">
  <div id="error"></div>
  <button onclick="login()">MULAI / 시작</button>
</div>

<div class="container hidden" id="quizBox">
  <h2 align="center">TEST KOSA KATA</h2>
  <div id="timer">50:00</div>
  <div class="progress"><div class="bar" id="bar"></div></div>
  <div class="question"><strong id="word"></strong></div>
  <input id="answer" placeholder="Jawaban">
  <button onclick="submit()">SUBMIT</button>
</div>

<div class="footer">© 2026 Denzuka - Kim Jongun. All rights reserved.</div>

<script>
const users = [ /* daftar user tetap sama seperti sebelumnya */ 
 {username:"user1",password:"12345"},
 {username:"hanarizka",password:"Nungkihana24!"},
 {username:"user3",password:"12345"},
 {username:"siswa01",password:"12345"},
 {username:"windi",password:"Windi2000"},
 {username:"rismaya97",password:"bahasakorea"},
 {username:"admin",password:"admin123",role:"admin"},
 {username:"Fikrisurya",password:"464646"},
 {username:"Mutiara2003",password:"Mutiara14"},
 {username:"sita77",password:"minyooki"},
 {username:"Aini185",password:"Doraemon"},
 {username:"Hangeulfei",password:"studykorea02"},
 {username:"Hamdan106",password:"Fukuo106"}
];

const kodeSoal = {
  "H29976": "soal1.json",
  "R43213": "soal2.json",
  "Z21985": "soal3.json"
};

let soal=[],i=0,score=0,time=3000,timer;
const loginBox = document.getElementById("loginBox");
const quizBox = document.getElementById("quizBox");
const user = document.getElementById("user");
const pass = document.getElementById("pass");
const kode = document.getElementById("kode");
const error = document.getElementById("error");
const timerDiv = document.getElementById("timer");
const bar = document.getElementById("bar");
const word = document.getElementById("word");
const answer = document.getElementById("answer");

function login(){
 const u = user.value.trim();
 const p = pass.value.trim();
 const k = kode.value.trim().toUpperCase();
 error.textContent = "";
 const akun = users.find(x => x.username === u && x.password === p);
 if(!akun){ error.textContent="Login salah"; return; }
 if(akun.role==="admin"){ location.href="admin.html"; return; }
 if(!kodeSoal[k]){ error.textContent="Kode test salah"; return; }

 const fileSoal = kodeSoal[k];
 console.log("Mencoba load:", fileSoal);

 fetch(fileSoal + "?v=" + Date.now())
  .then(r => {
    if(!r.ok) throw new Error(`HTTP ${r.status}: File tidak ditemukan atau error server`);
    return r.json();
  })
  .then(d => {
    if(!Array.isArray(d) || d.length === 0) throw "JSON kosong atau format salah";
    soal = d;
    console.log("Soal loaded:", soal.length, "item");
    loginBox.classList.add("hidden");
    quizBox.classList.remove("hidden");
    start();
  })
  .catch(e => {
    console.error("Gagal load soal:", e);
    error.textContent = "Gagal load soal: " + e.message;
  });
}

/* Fungsi start, timerDiv, next, submit, finish sama seperti sebelumnya */

function start(){
 i=0;score=0;time=3000;
 timer=setInterval(()=>{ time--; timerDiv(); if(time<=0)finish(); },1000);
 next();
}
function timerDiv(){
 const m=String(Math.floor(time/60)).padStart(2,"0");
 const s=String(time%60).padStart(2,"0");
 timerDiv.textContent=`${m}:${s}`;
}
function next(){
 if(i>=soal.length){finish();return;}
 word.textContent=soal[i].korea;
 answer.value="";
 answer.focus();
 bar.style.width=(i/soal.length*100)+"%";
}
function submit(){
 if(answer.value.trim().toLowerCase()===soal[i].indo.toLowerCase())score++;
 i++;
 next();
}
function finish(){
 clearInterval(timer);
 alert(`Skor kamu: ${score}/${soal.length}`);
 location.reload();
}

answer.addEventListener("keyup", e => { if(e.key === "Enter") submit(); });
</script>

</body>
</html>
